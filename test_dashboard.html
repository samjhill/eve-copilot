<!DOCTYPE html>
<html>
<head>
    <title>EVE Copilot Dashboard Test</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .alert-item { 
            background: #f0f0f0; 
            margin: 10px 0; 
            padding: 10px; 
            border-left: 4px solid #4caf50; 
        }
        .alert-item.priority-0 { border-left-color: #f44336; }
        .alert-item.priority-1 { border-left-color: #ff9800; }
        .alert-item.priority-2 { border-left-color: #4caf50; }
        .loading { color: #666; }
    </style>
</head>
<body>
    <h1>EVE Copilot Dashboard Test</h1>
    <h2>Recent Alerts</h2>
    <div id="alerts-list">
        <div class="loading">Loading alerts...</div>
    </div>
    
    <script>
        async function loadAlerts() {
            try {
                const response = await fetch('http://127.0.0.1:8080/api/alerts');
                const alerts = await response.json();
                
                const alertsDiv = document.getElementById('alerts-list');
                if (alerts.length === 0) {
                    alertsDiv.innerHTML = '<div class="loading">No alerts yet</div>';
                    return;
                }
                
                alertsDiv.innerHTML = alerts.map(alert => `
                    <div class="alert-item priority-${alert.priority}">
                        <div style="font-size: 0.8em; color: #666; margin-bottom: 5px;">
                            ${new Date(alert.timestamp).toLocaleString()}
                        </div>
                        <div style="font-weight: bold;">
                            ${alert.message}
                        </div>
                    </div>
                `).join('');
                
                console.log('Loaded alerts:', alerts);
            } catch (error) {
                console.error('Error loading alerts:', error);
                document.getElementById('alerts-list').innerHTML = 
                    '<div style="color: red;">Error loading alerts: ' + error.message + '</div>';
            }
        }
        
        // Load alerts when page loads
        loadAlerts();
        
        // Refresh every 5 seconds
        setInterval(loadAlerts, 5000);
    </script>
</body>
</html>
